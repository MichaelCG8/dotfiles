#compdef rcf

local -a refs commits

# Branches and tags
refs=(${(f)"$(git for-each-ref --format='%(refname:short)' refs/heads refs/tags 2>/dev/null)"})

# Recent commits (short hash with subject as description)
commits=(${(f)"$(git log --oneline -50 2>/dev/null | sed 's/ /:/')"})

_describe -t refs 'branch/tag' refs
_describe -t commits 'commit' commits
